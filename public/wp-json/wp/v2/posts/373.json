{"id":373,"date":"2018-04-21T21:23:23","date_gmt":"2018-04-22T03:23:23","guid":{"rendered":"https:\/\/wp-archive.zachbrogan.com\/?p=373"},"modified":"2018-04-21T21:24:26","modified_gmt":"2018-04-22T03:24:26","slug":"hvac-schematic-and-custom-board","status":"publish","type":"post","link":"https:\/\/wp-archive.zachbrogan.com\/byu-iot-lab\/hvac-schematic-and-custom-board\/","title":{"rendered":"HVAC Schematic and Custom Board"},"content":{"rendered":"<p>The <a href=\"https:\/\/github.com\/zbrogz\/hvac\" target=\"_blank\" rel=\"noopener\">hvac controller<\/a> design mentioned in <a href=\"https:\/\/wp-archive.zachbrogan.com\/byu-iot-lab\/hvac-controller\/\" target=\"_blank\" rel=\"noopener\">this post<\/a>\u00a0has been updated with a new schematic and board design. I drew a schematic by hand and then asked another member of the team to create the design in Eagle. The plan is to have a local company create the board for us from the design.<\/p>\n<p>Reviewing the Eagle schematic helped me to fix an error I made in the original hand drawn schematic. You can see below that the terminal block side of the relays should be connected to the 24 VAC wire, not the 3.3V line from the power board.<\/p>\n<p>The hvac controller serves to turn on and off the heat, ac, and fan system in a house. The hardware for this project consists of the following:<\/p>\n<ul>\n<li><strong>ESP8266 WiFi board:<\/strong> Periodically retrieves a new heater\/ac\/fan state from its <a href=\"http:\/\/api.zachbrogan.com\/hvac\">API<\/a> online which it uses to control the relays.<\/li>\n<li><strong>Solid state relays:\u00a0<\/strong>Turn on and off the heater\/ac\/fan by shorting their respective wires to the 24 V AC power line. The relays turn on when the esp8266 digital lines are asserted.<\/li>\n<li><strong>Terminal blocks:\u00a0<\/strong>Provide connection between the PCB and the HVAC wiring.<\/li>\n<li><strong>Power board:\u00a0<\/strong>Converts 24V AC from the hvac transformer to 3.3V DC to power the esp8266. A simplified version the <a href=\"http:\/\/kelly.flanagan.io\/hardware\/mydoorbell-the-power-supply\/\" target=\"_blank\" rel=\"noopener\">doorbell power supply<\/a>.<\/li>\n<\/ul>\n<div id=\"attachment_282\" style=\"width: 4042px\" class=\"wp-caption alignnone\"><img aria-describedby=\"caption-attachment-282\" loading=\"lazy\" src=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2017\/09\/IMG_2434.jpg\" alt=\"\" width=\"4032\" height=\"3024\" class=\"wp-image-282 size-full\" srcset=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2017\/09\/IMG_2434.jpg 4032w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2017\/09\/IMG_2434-300x225.jpg 300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2017\/09\/IMG_2434-768x576.jpg 768w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2017\/09\/IMG_2434-1024x768.jpg 1024w\" sizes=\"(max-width: 4032px) 100vw, 4032px\" \/><p id=\"caption-attachment-282\" class=\"wp-caption-text\">Hand drawn schematic of hvac controller with erroneous connections between the 3.3V line and relays<\/p><\/div>\n<div id=\"attachment_376\" style=\"width: 3310px\" class=\"wp-caption alignnone\"><img aria-describedby=\"caption-attachment-376\" loading=\"lazy\" src=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_schematic.png\" alt=\"\" width=\"3300\" height=\"2550\" class=\"size-full wp-image-376\" srcset=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_schematic.png 3300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_schematic-300x232.png 300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_schematic-768x593.png 768w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_schematic-1024x791.png 1024w\" sizes=\"(max-width: 3300px) 100vw, 3300px\" \/><p id=\"caption-attachment-376\" class=\"wp-caption-text\">HVAC Schematic<\/p><\/div>\n<div id=\"attachment_377\" style=\"width: 3310px\" class=\"wp-caption alignnone\"><img aria-describedby=\"caption-attachment-377\" loading=\"lazy\" src=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_full_view.png\" alt=\"\" width=\"3300\" height=\"2550\" class=\"size-full wp-image-377\" srcset=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_full_view.png 3300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_full_view-300x232.png 300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_full_view-768x593.png 768w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_full_view-1024x791.png 1024w\" sizes=\"(max-width: 3300px) 100vw, 3300px\" \/><p id=\"caption-attachment-377\" class=\"wp-caption-text\">HVAC full view board design<\/p><\/div>\n<div id=\"attachment_378\" style=\"width: 3310px\" class=\"wp-caption alignnone\"><img aria-describedby=\"caption-attachment-378\" loading=\"lazy\" src=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_top_view.png\" alt=\"\" width=\"3300\" height=\"2550\" class=\"size-full wp-image-378\" srcset=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_top_view.png 3300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_top_view-300x232.png 300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_top_view-768x593.png 768w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_top_view-1024x791.png 1024w\" sizes=\"(max-width: 3300px) 100vw, 3300px\" \/><p id=\"caption-attachment-378\" class=\"wp-caption-text\">HVAC top view board design<\/p><\/div>\n<div id=\"attachment_379\" style=\"width: 3310px\" class=\"wp-caption alignnone\"><img aria-describedby=\"caption-attachment-379\" loading=\"lazy\" src=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_bottom_view.png\" alt=\"\" width=\"3300\" height=\"2550\" class=\"size-full wp-image-379\" srcset=\"https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_bottom_view.png 3300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_bottom_view-300x232.png 300w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_bottom_view-768x593.png 768w, https:\/\/wp-archive.zachbrogan.com\/wp-content\/uploads\/2018\/04\/HVAC_bottom_view-1024x791.png 1024w\" sizes=\"(max-width: 3300px) 100vw, 3300px\" \/><p id=\"caption-attachment-379\" class=\"wp-caption-text\">HVAC bottom view board design<\/p><\/div>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>The hvac controller design mentioned in this post\u00a0has been updated with a new schematic and board design. I drew a schematic by hand and then asked another member of the team to create the design in Eagle. The plan is to have a local company create the board for us [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":[],"categories":[8],"tags":[],"_links":{"self":[{"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/posts\/373"}],"collection":[{"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/comments?post=373"}],"version-history":[{"count":2,"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/posts\/373\/revisions"}],"predecessor-version":[{"id":381,"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/posts\/373\/revisions\/381"}],"wp:attachment":[{"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/media?parent=373"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/categories?post=373"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/wp-archive.zachbrogan.com\/wp-json\/wp\/v2\/tags?post=373"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}